import pytest
from pages.login_page import LoginPage

class TestLogin:
    '''
    ????? ?????? ???? ????? ??????
    '''
    
    def test_login_success(self, driver, base_url):
        '''
        TC-001: ?????? ?? ????? ?????? ??????
        '''
        login_page = LoginPage(driver)
        login_page.open(base_url)
        login_page.enter_username('standard_user')
        login_page.enter_password('secret_sauce')
        login_page.click_login()
        
        # ?????? ?? ???? ???? ???????? ????? ?? URL
        assert login_page.is_logged_in(), '??? ????? ?????? ??????'
    
    def test_login_invalid_username(self, driver, base_url):
        '''
        TC-002: ?????? ?? ????? ?????? ???? ?????? ??? ????
        '''
        login_page = LoginPage(driver)
        login_page.open(base_url)
        login_page.enter_username('invalid_user')
        login_page.enter_password('secret_sauce')
        login_page.click_login()
        
        # ??? ?? ???? ????? ???
        error_message = login_page.get_error_message()
        assert error_message, '?? ???? ????? ??? ???????? ??? ??????'
    
    def test_login_empty_username(self, driver, base_url):
        '''
        TC-003: ?????? ?? ????? ?????? ???? ??? ??????
        '''
        login_page = LoginPage(driver)
        login_page.open(base_url)
        login_page.enter_password('secret_sauce')
        login_page.click_login()
        
        # ??? ?? ???? ????? ???
        error_message = login_page.get_error_message()
        assert error_message, '?? ???? ????? ??? ???? ???????? ??????'

